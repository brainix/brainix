#summary The relationship between the process manager server and the file system server.

= The File System's Relationship to the Process Manager? =

The file system has a file *[http://brainix.googlecode.com/svn/trunk/src/fs/proc.c proc.c]* which governs the *fork()*, *execve()*, and *exit()* system calls that (for some reason) the file server deals with. Why does the file server deal with this rather than the process manager?

The file system server should deal solely with the file-related system calls; the process manager should deal solely with the process management system calls, and that includes imho the execution of programs.

Just curious if there was any purpose or whether it was just laziness, etc.?

= Raj's Comment =

These three syscalls require some work in the memory manager, some work in the file system, and some work in the process manager.  For example, when a parent process *fork()*s a child, the memory manager must allocate memory for the child, the file system must set the child's root and working directories to the same as its parent's, and, finally, the process manager must schedule the child.

In other words, POSIX wasn't designed with a microkernel in mind, so these distinctions can become somewhat artificial and unnatural.  But I can't think of a better way to do it than to split such syscalls up between different servers.  Can you?

= Alex's Reply =

Hmm...well I have a few ideas, but I don't know how effecient they'd be; so let's look at some microkernel that's posix compliant. Like how Minix 3 deals with it; or is *this* how Minix 3 deals with it?

= Raj's Reply =

I haven't looked at Minix 3, but previous versions cheat a little by keeping all processes in a single address space.  Brainix is a little purer by creating true user processes, even for system servers, each isolated in its own address space.  As far as the actual design goes, I believe Minix uses a similar method of splitting certain syscalls up between different servers.  Please give me a few days, and I'll post a more complete response.

What are your ideas?  I like your goal of getting a shell up as quickly as possible.  Maybe we shouldn't worry so much about efficiency for now?